@model IEnumerable<Platillo>
@{
    Layout = "_AdminLayout";
}

<div class="container-fluid p-4 border rounded shadow-sm"> <h2 class="mb-4 text-dark">Gestión de Platillos</h2>

    <a asp-action="AddPlatillo" asp-controller="Platillo" class="btn btn-dark mb-3">Añadir Platillo</a>

    @if (Model?.Count() > 0)
    {
        <table class="table table-hover table-sm my-2">
            <thead>
                <tr class="table"> 
                    <th style="width: 120px;">Imagen</th>
                    <th>Platillo</th>
                    <th>Categoría</th>
                    <th style="width: 30%;">Descripción</th> 
                    <th class="text-end" style="width: 100px;">Precio</th>
                    <th style="width: 160px;">Acción</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var platillo in Model)
                {
                    <tr>
                        <td>
                            @if (string.IsNullOrWhiteSpace(platillo.ImagenUrl))
                            {
                                <img src="/img/noImage.png" style="width:80px;height:100px" alt="platillo imagen" />
                            }
                            else
                            {
                                <img src="/img/@platillo.ImagenUrl" style="width:80px;height:100px" alt="platillo imagen" />
                            }
                        </td>
                        <td>@platillo.PlatilloName</td>
                        <td>@platillo.Categoria.CategoriaName</td>
                        
                        <td>
                            @(platillo.Descripcion.Length > 100 ? platillo.Descripcion.Substring(0, 100) + "..." : platillo.Descripcion)
                        </td>
                        
                        <td class="text-end">@platillo.Precio</td>
                        
                        <td>
                            <a asp-action="UpdatePlatillo" asp-controller="Platillo" asp-route-id="@platillo.Id" class="btn btn-success btn-sm">Editar</a>
                            <a asp-action="DeletePlatillo" asp-controller="Platillo" asp-route-id="@platillo.Id" class="btn btn-danger btn-sm" onclick="return window.confirm('¿Estás seguro?')">Eliminar</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <div class="alert alert-info mt-3">
            <h3>Platillos vacío</h3>
        </div>
    }
</div>
